syntax = "proto3";

package reflex.proxy;
option go_package = "github.com/xtls/xray-core/proxy/reflex";

// User: تعریف کلاینت‌های مجاز برای inbound
message User {
  string id = 1;      // UUID کاربر
  string policy = 2;  // سیاست ترافیک (مثلاً "mimic-http2-api")
}

// Account: فعلاً اسکلت اولیه (در مراحل بعد می‌تونه توسعه پیدا کنه)
message Account {
  string id = 1;  // UUID کاربر
}

message Fallback {
  uint32 dest = 1;  // پورت مقصد fallback (مثلاً 80)
}

// InboundConfig: تنظیمات inbound
message InboundConfig {
  repeated User clients = 1;
  Fallback fallback = 2;
}

// OutboundConfig: تنظیمات outbound
message OutboundConfig {
  string address = 1;
  uint32 port = 2;
  string id = 3;  // UUID کلاینت
}
